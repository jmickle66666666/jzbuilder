{"version":3,"sources":["./js/canvas.js","./js/util.js","./js/main.js","./js/mapdata.js","./js/objects.js"],"names":["JZBuilder","EditMode","BuilderCanvas","canvas","this","CANVAS_BG_COLOR","GRID_COLOR","GRID_CENTER_COLOR","DRAWLINE_COLOR","MAPLINE_COLOR","HIGHLIGHTLINE_COLOR","VERTEX_COLOR","DRAWVERTEX_COLOR","SECTOR_COLOR","SELECTEDLINE_COLOR","LINE_SELECT_DISTANCE","VERTEX_SIZE","ZOOM_SPEED","GRIDLINE_WIDTH","viewOffset","Point","zoom","gridSize","ctx","getContext","prototype","posToView","p","x","y","viewToPos","redraw","drawGrid","drawSectors","drawMapLines","drawDrawLines","drawVertexes","drawSelectedLines","drawHighlightedLines","i","fillStyle","fillRect","width","height","lineWidth","strokeStyle","Math","round","beginPath","moveTo","lineTo","stroke","drawLines","mapData","lines","color","document","getElementById","MapData","Rect","topLeft","bottomRight","Object","defineProperty","get","enumerable","configurable","pointInBounds","Sector","floorTexture","createElement","src","invalidate","length","bounds","min","start","end","max","preview","imageSmoothingEnabled","clip","ox","oy","j","drawImage","Line"],"mappings":"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"}